/*! chexiang analytics - v1.0.0 - 2015-09-24 */(function(){PRE_CA={IPT:[],SPN:[],LIS:[],DIV:[],DLS:[],DTS:[],DDS:[],BTN:[],LNK:[]};function addEvent(obj,type,fn){if(obj.addEventListener){obj.addEventListener(type,fn,false)}else{obj["e"+type+fn]=fn;obj.attachEvent("on"+type,function(){obj["e"+type+fn].call(obj,window.event)})}}function getElementById(Id){if(!Id){return null}var e=document.getElementById(Id);return e?e:null}function getByTag(tag){if(!tag){return null}var e=document.getElementsByTagName(tag);return e?e:null}function getAttr(e,attr){return e.attr||e.getAttribute(attr)}function getText(e){return e.innerText?e.innerText:e.innerHTML.replace(/<.+?>/gim,"")}function getVal(e){return e.value}function isInArray(){if(!Array.indexOf){Array.prototype.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i}}return -1}}}Analytics=function(){this.input_buttons=[];this.span_buttons=[];this.li_buttons=[];this.div_buttons=[];this.dl_buttons=[];this.dt_buttons=[];this.dd_buttons=[];this.buttons=[];this.links=[];this.url=(("https:"==document.location.protocol)?" https://":" http://")+"data.chexiang.com/";this.idArr=[];isInArray();var btns=getByTag("button");for(i=0;i<btns.length;i++){if(PRE_CA.BTN.indexOf(btns[i])<0){this.buttons.push(btns[i]);PRE_CA.BTN.push(btns[i])}}var lnks=getByTag("a");for(i=0;i<lnks.length;i++){if(PRE_CA.LNK.indexOf(lnks[i])<0){this.links.push(lnks[i]);PRE_CA.LNK.push(lnks[i])}}var inputs=getByTag("input");for(i=0;i<inputs.length;i++){if(PRE_CA.IPT.indexOf(inputs[i])<0&&(getAttr(inputs[i],"type")==="button"||getAttr(inputs[i],"type")==="submit")){this.input_buttons.push(inputs[i]);PRE_CA.IPT.push(inputs[i])}}var spans=getByTag("span");for(i=0;i<spans.length;i++){if(PRE_CA.SPN.indexOf(spans[i])<0&&getAttr(spans[i],"ca")!=null&&getAttr(spans[i],"ca")!=""){this.span_buttons.push(spans[i]);PRE_CA.SPN.push(spans[i])}}var lis=getByTag("li");for(i=0;i<lis.length;i++){if(PRE_CA.LIS.indexOf(lis[i])<0&&getAttr(lis[i],"ca")!=null&&getAttr(lis[i],"ca")!=""){this.li_buttons.push(lis[i]);PRE_CA.LIS.push(lis[i])}}var divs=getByTag("div");for(i=0;i<divs.length;i++){if(PRE_CA.DIV.indexOf(divs[i])&&getAttr(divs[i],"ca")!=null&&getAttr(divs[i],"ca")!=""){this.div_buttons.push(divs[i]);PRE_CA.DIV.push(divs[i])}}var dls=getByTag("dl");for(i=0;i<dls.length;i++){if(PRE_CA.DLS.indexOf(dls[i])<0&&getAttr(dls[i],"ca")!=null&&getAttr(dls[i],"ca")!=""){this.dl_buttons.push(dls[i]);PRE_CA.DLS.push(dls[i])}}var dts=getByTag("dt");for(i=0;i<dts.length;i++){if(PRE_CA.DTS.indexOf(dts[i])&&getAttr(dts[i],"ca")!=null&&getAttr(dts[i],"ca")!=""){this.dt_buttons.push(dts[i]);PRE_CA.DTS.push(dts[i])}}var dds=getByTag("dd");for(i=0;i<dds.length;i++){if(PRE_CA.DDS.indexOf(dds[i])<0&&getAttr(dds[i],"ca")!=null&&getAttr(dds[i],"ca")!=""){this.dd_buttons.push(dds[i]);PRE_CA.DDS.push(dds[i])}}this.countClick=function(e,type){var me=this,flag=getText(e)||getVal(e)||null,Id=getAttr(e,"id")||type+"_"+flag,ca=getAttr(e,"ca")||null;addEvent(e,"click",function(){me.send(Id+"&ca="+ca+"&_v="+new Date())})};this.send=function(args){var args=args||null,img=new Image(1,1);img.src=this.url+"ca.gif?"+args}};Analytics.prototype={constructor:Analytics,scan:function(){var me=this;function bindClick(btns,type){for(i=0;i<btns.length;i++){me.countClick(btns[i],type)}}bindClick(this.input_buttons,"input");bindClick(this.li_buttons,"li");bindClick(this.div_buttons,"div");bindClick(this.span_buttons,"span");bindClick(this.dl_buttons,"dl");bindClick(this.dt_buttons,"dt");bindClick(this.dd_buttons,"dd");bindClick(this.buttons,"button");bindClick(this.links,"a")}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){(new Analytics).scan()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState=="complete"){(new Analytics).scan()}})}}})();